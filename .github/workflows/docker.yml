name: Docker
on:
    push:
        branches: [ docker ]
    pull_request:
        branches: [ docker ]


jobs:
  vm:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo This job does not specify a container.
          echo It runs directly on the virtual machine.
        name: Run on VM
  container:
    runs-on: ubuntu-latest
    container: chihchun/opencl-intel
    steps:
      - run: apt-get install clinfo sudo
      - run: lscpu
      - run: sudo clinfo
      - run: |
          echo This job does specify a container.
          echo It runs in the container instead of the VM.
        name: Run in container
